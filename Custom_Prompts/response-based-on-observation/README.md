# Background
This prompt instructs an LLM to answer a query based on observations from a subset of [ReAct](https://react-lm.github.io/) iterations. It is essentially identical to the RetrievalQA chain prompt, so you have the option to use that instead. 

The prompt relies on two input variables: {observations} and {task}:  
1. task :  This is the original task given to the ReAct agent. This is equivalent to 'input' in the  RetrievalQA chain prompt. Here's an example:
```
task ="Which is bigger? BTS's oldest member's birth month vs. incumbent Korean president's birth month"
```

2. observations : This is the parsed observations acquired from an ReAct-agent's scratchpad. They're equivalent to the 'context' in the RetrievalQA chain prompt. Here's an example:  
```
observations = """
1.  The oldest member of BTS is Jin, and his birth month is December. He was born on December 4, 1992.
2.  The current President of South Korea, Yoon Suk Yeol, was born on 18 December 1960. So, his birth month is December.
"""
```

The output generated by the chain looks like this:
```
response = chain.invoke({'task':task, 'observations':observations})
print(response.content)

They are the same.
```

# Use Cases
This prompt is designed for use in a subsequent chain after the ReAct agent chain with the [prompt](https://smith.langchain.com/hub/jet-taekyo-lee/tagging-extracting-agent-scratchpad?organizationId=99c107dc-9be4-5ebc-9aee-41fafaa9d426). 

- Step 1) The ReAct agent chain outputs a structured 'thoughts-actions-observations' JSON blob. 
- Step 2) The JSON blob is parsed into a string (let's call it 'observations') that contains only observations. 
- Step 3) Two input variables - 'task' (from the earlier chain) and 'observations' (from Step 2) - are input into the subsequent chain.  

# How to play around?
The following code snippet provides an example of how you can utilize the prompt with LLMs.
```
from langchain import hub
from langchain.chat_models import AzureChatOpenAI

prompt = hub.pull("jet-taekyo-lee/response-based-on-observation")
chat_model = AzureChatOpenAI(deployment_name=deployment_name, temperature=0)
chain = prompt | chat_model

task = "Which is bigger? BTS's oldest member's birth month vs. incumbent Korean president's birth month"
observations = """
1.  The oldest member of BTS is Jin, and his birth month is December. He was born on December 4, 1992.
2.  The current President of South Korea, Yoon Suk Yeol, was born on 18 December 1960. So, his birth month is December.
"""
response = chain.invoke({'task':task, 'coobservationsntext':observations})
```


Visit the provided [GitHub repo](https://github.com/Taekyo-Lee/LLM-powered-apps/tree/main/Custom_Prompts/response-based-on-observation) and download [response-based-on-observation/nb_response-based-on-observation.ipynb](https://github.com/Taekyo-Lee/LLM-powered-apps/blob/main/Custom_Prompts/persona-based-dialog/nb_response-based-on-observation.ipynb).ipynb file.